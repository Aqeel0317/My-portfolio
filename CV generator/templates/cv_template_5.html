<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ user_data.name }} - CV</title>
    <style>
        /* Elegant Timeline - Base Styles */
        @import url('https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Merriweather:wght@300;400;700&display=swap');

        body {
            font-family: 'Lato', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f8f8;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            padding-top: 20px; /* Add padding for screen view */
            padding-bottom: 20px;
        }

        .cv-container {
            display: flex;
            max-width: 8.5in; /* Approx A4 width */
            min-height: 11in; /* Approx A4 height */
            background-color: #fff;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            border: 1px solid #ddd;
        }

        .sidebar {
            width: 35%;
            background-color: #2c3e50; /* Dark blue-grey */
            color: #ecf0f1; /* Light grey text */
            padding: 30px 25px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center; /* Center items like image */
        }

        .profile-pic-container {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            overflow: hidden;
            margin-bottom: 25px;
            border: 4px solid #3498db; /* Accent color border */
        }

        .profile-pic {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .sidebar h2 {
            font-family: 'Merriweather', serif;
            color: #3498db; /* Accent color */
            border-bottom: 1px solid #3498db;
            padding-bottom: 8px;
            margin-top: 20px;
            margin-bottom: 15px;
            text-align: center;
            width: 100%;
        }

        .sidebar h3 {
             font-family: 'Merriweather', serif;
             font-size: 1.3em;
             margin-bottom: 5px;
             text-align: center;
             color: #fff;
        }
         .sidebar .professional-title {
            font-size: 1em;
            font-weight: 300;
            color: #bdc3c7; /* Lighter grey */
            text-align: center;
            margin-bottom: 20px;
        }


        .contact-info p, .skills ul, .links ul {
            margin-bottom: 10px;
            font-size: 0.9em;
            word-wrap: break-word; /* Prevent long emails/links from overflowing */
        }
        .contact-info i, .links i {
            margin-right: 8px;
            color: #3498db; /* Accent color */
            width: 15px; /* Align icons */
            text-align: center;
        }

        .skills ul, .links ul {
            list-style: none;
            padding: 0;
        }
        .skills li {
            background-color: #34495e; /* Slightly lighter dark blue */
            padding: 5px 10px;
            border-radius: 4px;
            margin-bottom: 6px;
            display: inline-block; /* Skills tags */
            margin-right: 5px;
            font-size: 0.85em;
        }
         .links a {
            color: #ecf0f1;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        .links a:hover {
            color: #3498db;
        }


        .main-content {
            width: 65%;
            padding: 30px 35px;
            box-sizing: border-box;
        }

        .main-content h1, .main-content h2 {
            font-family: 'Merriweather', serif;
            color: #2c3e50; /* Dark blue-grey */
            border-bottom: 2px solid #3498db; /* Accent color */
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
         .main-content h1 { /* Name in main content - optional */
            font-size: 2.2em;
            text-align: left;
            margin-bottom: 5px;
            border-bottom: none; /* Remove border if name is also in sidebar */
            display: none; /* Hide if name is prominently in sidebar */
        }

        .main-content h2 {
            font-size: 1.5em;
            margin-top: 30px;
        }

        .summary p {
            font-style: italic;
            color: #555;
            margin-bottom: 25px;
        }

        .section-item {
            margin-bottom: 25px;
            position: relative;
            padding-left: 25px; /* Space for timeline element */
        }

        .section-item::before { /* Timeline circle */
            content: '';
            position: absolute;
            left: 0;
            top: 5px;
            width: 12px;
            height: 12px;
            background-color: #3498db; /* Accent color */
            border-radius: 50%;
            border: 2px solid #fff;
            box-shadow: 0 0 0 2px #3498db;
        }
         .section-item::after { /* Timeline line */
            content: '';
            position: absolute;
            left: 7px; /* Center align with circle */
            top: 20px;
            bottom: -15px; /* Extend below the item */
            width: 2px;
            background-color: #bdc3c7; /* Light grey line */
        }
         section:last-of-type .section-item:last-child::after {
             display: none; /* Remove line after the last item */
         }


        .section-item h3 {
            font-size: 1.1em;
            margin-bottom: 3px;
            color: #34495e; /* Darker blue-grey */
        }

        .section-item .sub-heading {
            font-size: 1em;
            font-weight: bold;
            color: #555;
            margin-bottom: 5px;
        }
        .section-item .years {
            font-size: 0.9em;
            color: #7f8c8d; /* Grey */
            margin-bottom: 8px;
        }

        .section-item p, .section-item ul {
            font-size: 0.95em;
            color: #444;
        }
         .section-item ul {
            list-style: disc;
            margin-left: 20px;
         }


        /* --- A4 Print Styles --- */
        @media print {
            @page {
                size: A4;
                margin: 1cm; /* Standard A4 margin */
            }

            html, body {
                width: 210mm; /* A4 width */
                height: 297mm; /* A4 height */
                margin: 0;
                padding: 0;
                background-color: #fff; /* Ensure white background */
                color: #000; /* Ensure black text */
                font-size: 10pt; /* Adjust base font size for print */
                -webkit-print-color-adjust: exact !important; /* Try to force colors/backgrounds in Chrome/Safari */
                print-color-adjust: exact !important; /* Standard */
            }

            .cv-container {
                max-width: 100%;
                width: 190mm; /* Width minus margins */
                min-height: 277mm; /* Height minus margins */
                box-shadow: none;
                border: none;
                margin: 0;
                padding: 0;
                display: flex; /* Keep flex layout */
            }

            .sidebar {
                 width: 33%; /* Adjust width slightly if needed */
                 padding: 15px 10px; /* Reduce padding */
                 background-color: #2c3e50 !important; /* Force background */
                 color: #ecf0f1 !important; /* Force text color */
            }
             .sidebar h2, .sidebar h3 {
                 color: #3498db !important; /* Force accent color */
             }
             .sidebar .professional-title {
                 color: #bdc3c7 !important;
             }
             .sidebar .contact-info i, .sidebar .links i{
                 color: #3498db !important;
             }
             .sidebar .links a {
                 color: #ecf0f1 !important;
             }
            .sidebar .skills li {
                 background-color: #34495e !important; /* Force skill bg */
                 color: #ecf0f1 !important; /* Force skill text */
            }
             .profile-pic-container {
                 width: 120px; /* Slightly smaller for print */
                 height: 120px;
                 border: 3px solid #3498db !important;
             }


            .main-content {
                width: 67%; /* Adjust width slightly */
                padding: 15px 20px; /* Reduce padding */
                 color: #000 !important; /* Ensure main text is black */
            }

            .main-content h1, .main-content h2 {
                 color: #2c3e50 !important; /* Force heading color */
                 border-bottom-color: #3498db !important; /* Force border color */
                 padding-bottom: 5px;
                 margin-bottom: 15px;
                 margin-top: 20px;
            }
            .main-content h1 {
                 font-size: 18pt;
            }
            .main-content h2 {
                font-size: 14pt;
            }

            .summary p {
                color: #333 !important;
                font-style: normal;
            }

            .section-item {
                margin-bottom: 15px; /* Reduce spacing */
                padding-left: 20px; /* Adjust indent */
                page-break-inside: avoid; /* Try to keep items together */
            }
             .section-item::before {
                 background-color: #3498db !important;
                 border: 2px solid #fff !important;
                 box-shadow: 0 0 0 2px #3498db !important;
                 top: 3px;
                 left: -2px;
                 width: 10px;
                 height: 10px;
             }
             .section-item::after {
                 background-color: #ccc !important; /* Lighter grey line */
                 left: 3px;
                 top: 15px;
                 bottom: -10px;
             }


            .section-item h3 {
                font-size: 11pt;
                color: #34495e !important;
            }
             .section-item .sub-heading{
                 font-size: 10pt;
                 color: #222 !important;
             }
            .section-item .years {
                font-size: 9pt;
                color: #555 !important;
            }
            .section-item p, .section-item ul {
                font-size: 9.5pt;
                color: #000 !important;
            }

            /* Hide elements not needed for print if any */
            /* e.g., .print-hide { display: none; } */
        }
    </style>
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="cv-container">
        <aside class="sidebar">
            {% if user_data.profile_pic_base64 %}
            <div class="profile-pic-container">
                <img src="{{ user_data.profile_pic_base64 }}" alt="Profile Picture" class="profile-pic">
            </div>
            {% endif %}

            <h3>{{ user_data.name }}</h3>
            {% if user_data.professional_title %}
                <p class="professional-title">{{ user_data.professional_title }}</p>
            {% endif %}


            <div class="contact-info">
                <h2>Contact</h2>
                {% if user_data.phone %}
                    <p><i class="fas fa-phone"></i> {{ user_data.phone }}</p>
                {% endif %}
                {% if user_data.email %}
                    <p><i class="fas fa-envelope"></i> {{ user_data.email }}</p>
                {% endif %}
                 {% if user_data.address %}
                    <p><i class="fas fa-map-marker-alt"></i> {{ user_data.address }}</p>
                {% endif %}
            </div>

             <div class="links">
                 <h2>Links</h2>
                 <ul>
                 {% if user_data.linkedin %}
                    <li><i class="fab fa-linkedin"></i> <a href="{{ user_data.linkedin }}" target="_blank" rel="noopener noreferrer">LinkedIn</a></li>
                 {% endif %}
                 {% if user_data.portfolio %}
                     <li><i class="fas fa-globe"></i> <a href="{{ user_data.portfolio }}" target="_blank" rel="noopener noreferrer">Portfolio</a></li>
                 {% endif %}
                 </ul>
            </div>

            {% if user_data.skills %}
            <div class="skills">
                <h2>Skills</h2>
                <ul>
                    {% for skill in user_data.skills %}
                    <li>{{ skill }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

        </aside>

        <main class="main-content">
            {% if user_data.summary %}
            <section class="summary">
                <h2><i class="fas fa-user-alt"></i> Summary</h2>
                <p>{{ user_data.summary }}</p>
            </section>
            {% endif %}

            {% if user_data.experience %}
            <section class="experience">
                <h2><i class="fas fa-briefcase"></i> Experience</h2>
                {% for exp in user_data.experience %}
                <div class="section-item">
                    <h3>{{ exp.title }}</h3>
                    <p class="sub-heading">{{ exp.company }}</p>
                    {% if exp.years %}<p class="years">{{ exp.years }}</p>{% endif %}
                    {% if exp.description %}
                       {% if '\n' in exp.description %}
                           <ul>
                           {% for line in exp.description.split('\n') %}
                               {% if line.strip() %}
                                   <li>{{ line.strip() }}</li>
                               {% endif %}
                           {% endfor %}
                           </ul>
                       {% else %}
                           <p>{{ exp.description }}</p>
                       {% endif %}
                    {% endif %}
                </div>
                {% endfor %}
            </section>
            {% endif %}

            {% if user_data.education %}
            <section class="education">
                <h2><i class="fas fa-graduation-cap"></i> Education</h2>
                {% for edu in user_data.education %}
                <div class="section-item">
                    <h3>{{ edu.degree }}</h3>
                     <p class="sub-heading">{{ edu.institution }}</p>
                    {% if edu.years %}<p class="years">{{ edu.years }}</p>{% endif %}
                </div>
                {% endfor %}
            </section>
            {% endif %}

        </main>
    </div>
</body>
</html>